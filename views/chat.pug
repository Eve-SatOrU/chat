doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Chat with #{user.username}

  body
    h1 Chat with #{user.username}

    #messages
      // message box for displaying chat messages

    form(onsubmit="return false;")
      input#message-input(type="text")
      button#send-button Send

  script(src="/socket.io/socket.io.js")
  script.
    const socket = io();

    // listen for incoming chat messages
    socket.on('message', (msg) => {
      const messageElem = document.createElement('li');
      messageElem.textContent = msg;

      const messagesElem = document.querySelector('#messages');
      messagesElem.appendChild(messageElem);
    });

    // send chat messages
    const messageInput = document.querySelector('#message-input');
    const sendButton = document.querySelector('#send-button');

    sendButton.addEventListener('click', (event) => {
      const message = messageInput.value.trim();

      if (message) {
        socket.emit('message', message);
        messageInput.value = '';
      }
    });
